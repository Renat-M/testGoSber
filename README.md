# testGoSber

# Тестовое задание

Необходимо написать сервис на Go, удовлетворяющий критериям:

 •	Используем framework gin или net/http

 •	Сервис получает конфигурацию из окружения - порт, на котором запускается приложение, данные для подключения к БД (хост, порт, пользователь, пароль, схема)

 •	Сервис имеет connection к БД (Postgres, структура БД описана ниже) 

 •	Сервис имеет 3 endpoint (обрабатываем http запросы)
 1. GET host:port/api/v1/get_report
    В запросе передается report_id
    Необходимо получить отчет из БД, соответствующий данному id
    Ответ {“error_msg”: “”, “report_info”:  “”}, где error_msg – сообщение об ошибке (пустое, если ошибки не было), report_info – содержимое поля report_info 

 2. POST host:port/api/v1/set_report
    В запросе передаются данные для добавления в БД в формате {“report_info”: “”}, где report_info – содержимое поля report_info. сreation_time и report_id формируются автоматически
    Необходимо записать отчет в БД
    Ответ {“error_msg”: “”}, где error_msg – сообщение об ошибке (пустое, если ошибки не было)

 3. GET host:port/api/v1/get_observation_time
    В запросе передается model_id
    Необходимо получить максимальное промежуток времени (в кол-ве дней) в течении которых не было поступлений отчетов по модели (если запись по модели была всего одна, то считаем по текущий день)
    Ответ {“error_msg”: “”, “max_observation_period”: “”}, где error_msg – сообщение об ошибке (пустое, если ошибки не было), max_observation_period – максимальный промежуток во время наблюдения модели






# Дополнительное задание

	Добавить логирование
	•	Время пришедшего запроса
	•	Отправителя запроса
	•	Endpoint запроса
	Написать Dockerfile




Рисунок 1 Схема БД

<img width="339" alt="Screen Shot 2023-07-06 at 00 15 06" src="https://github.com/Renat-M/testGoSber/assets/79263534/92f16498-d951-4e73-9fcf-bea9a6248a15">


